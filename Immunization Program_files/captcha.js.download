var a,b,c,submitContent,captcha,locked,validSubmit=false,timeoutHandle;function generateCaptcha(){$('.captch-btn').prop('disabled',true);a=Math.ceil(Math.random()*10);b=Math.ceil(Math.random()*10);c=a+b;submitContent='<span>'+a+'</span> + <span>'+b+'</span>'+
' = <span><input class="submit__input" type="text" tabindex="5" maxlength="2" size="2" required /></span>';$('.controls-div').html(submitContent);init();}
function checkCaptcha(){if(captcha===c){$('.submit__generated').removeClass('unvalid').addClass('valid');$('.submit').removeClass('overlay');$('.submit__overlay').fadeOut('fast');$('.submit__error').addClass('hide');$('.submit__error--empty').addClass('hide');$('.captch-btn').prop('disabled',false);validSubmit=true;}
else{if(captcha===''){$('.submit__error').addClass('hide');$('.submit__error--empty').removeClass('hide');}
else{$('.submit__error').removeClass('hide');$('.submit__error--empty').addClass('hide');}
$('.submit__generated').removeClass('valid').addClass('unvalid');$('.submit').addClass('overlay');$('.submit__overlay').fadeIn('fast');$('.captch-btn').prop('disabled',true);validSubmit=false;}
return validSubmit;}
function unlock(){locked=false;}
(function($){$('.fa-refresh').on('click',function(){if(!locked){locked=true;setTimeout(unlock,500);generateCaptcha();setTimeout(checkCaptcha,0);}});});function init(){$('.submit__input').on('propertychange change keyup input paste',function(){window.clearTimeout(timeoutHandle);timeoutHandle=window.setTimeout(function(){captcha=$('.submit__input').val();if(captcha!==''){captcha=Number(captcha);}
checkCaptcha();},150);});$('body').on('keydown',function(e){if(e.which===13){if($('.submit-form').hasClass('overlay')){checkCaptcha();}else{$('.submit-form').addClass('enter-press');}}}).on('keyup',function(e){if(e.which===13){$('.submit-form').removeClass('enter-press');}});$('.fa-refresh').on('click',function(){if(!locked){locked=true;setTimeout(unlock,500);generateCaptcha();setTimeout(checkCaptcha,0);}});$('.submit-form-overlay').on('click',function(){checkCaptcha();});}
generateCaptcha();